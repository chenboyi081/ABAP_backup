<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<title>ZSD015_DEFINE</title>
</head>
<body bgcolor="#FFFFE0">
<font size="3" face = "Arial" color="#000000"><b>Code listing for: ZSD015_DEFINE</b></font>
<br>
<font size="3" face = "Arial" color="#000000"><b>Description:  Include ZSD015_DEFINE</b></font>
<hr>
<pre width="100">
<font color ="#0000FF">*&---------------------------------------------------------------------*</font>
<font color ="#0000FF">*&  包括                ZSD015_DEFINE</font>
<font color ="#0000FF">*&---------------------------------------------------------------------*</font>
<font color ="#0000FF">***********************************************************************</font>
<font color ="#0000FF">* 类型池</font>
<font color ="#0000FF">************************************************************************</font>
TYPE-POOLS SLIS.
<font color ="#0000FF">************************************************************************</font>
<font color ="#0000FF">* 表声明</font>
<font color ="#0000FF">************************************************************************</font>
TABLES:A503,
       A502,
       KONP,
       A005,
       A307,
       MARA.

<font color ="#0000FF">************************************************************************</font>
<font color ="#0000FF">* 类型定义</font>
<font color ="#0000FF">************************************************************************</font>
TYPES:BEGIN OF TY_CUSTOMER,
     ZXH TYPE I,
     KSCHL TYPE A503-KSCHL,                            "条件类型
     VKORG TYPE A503-VKORG,                            "销售组织
     KUNNR TYPE A503-KUNNR,                            "客户编码
     ADRNR TYPE KNA1-ADRNR,
     ZNAME TYPE C LENGTH 120,                            "客户名称
     MATNR TYPE A503-MATNR,                            "物料号
     BISMT TYPE MARA-BISMT,                            "旧物料号
     PRDHA TYPE MARA-PRDHA,                            "产品层次
     MAKTX TYPE MAKT-MAKTX,                            "物料描述
     ZDISC TYPE P DECIMALS 3,                            "价格
     KONWA TYPE KONP-KONWA,                            "币种
     KPEIN TYPE KONP-KPEIN,                            "数量单位
     KRECH TYPE KONP-KRECH,                            "计算类型
     DATBI TYPE A503-DATBI,                            "有效期到
     DATAB TYPE A503-DATAB,                            "有效期从
     KNUMH TYPE A503-KNUMH,                            "条件记录号
     ZWLCD TYPE MARA-ZWLCD,
      END OF TY_CUSTOMER.

TYPES:BEGIN OF TY_PRICE,
     ZXH TYPE I,
     KSCHL TYPE A502-KSCHL,                            "条件类型
     VKORG TYPE A502-VKORG,                            "销售组织
     KONDM TYPE A502-KONDM,                            "物料定价组
     VTEXT TYPE T178T-VTEXT,                           "物料定价组描述
     KONDA TYPE A502-KONDA,                            "价格组
     ZDISC TYPE P DECIMALS 3,                            "价格
     KONWA TYPE KONP-KONWA,                            "币种
     KPEIN TYPE KONP-KPEIN,                            "数量单位
     KRECH TYPE KONP-KRECH,                            "计算类型
     DATBI TYPE A502-DATBI,                            "有效期到
     DATAB TYPE A502-DATAB,                            "有效期从
     KNUMH TYPE A502-KNUMH,                            "条件记录号
      END OF TY_PRICE.

TYPES:BEGIN OF TY_TAX,
     ZXH TYPE I,
     KSCHL TYPE A005-KSCHL,                                 "条件类型
     VKORG TYPE A005-VKORG,                                 "销售组织
     KUNNR TYPE A005-KUNNR,                                 "客户编码
     ADRNR TYPE KNA1-ADRNR,
     ZNAME TYPE C LENGTH 120,                               "客户名称
     VTWEG TYPE A005-VTWEG,                                 "分销渠道
     MATNR TYPE A005-MATNR,                                 "物料号
     BISMT TYPE MARA-BISMT,                                 "旧物料号
     PRDHA TYPE MARA-PRDHA,                                 "产品层次
     MAKTX TYPE MAKT-MAKTX,                                 "物料描述
     KBETR TYPE P DECIMALS 3,                                 "价格
     KONWA TYPE KONP-KONWA,                                 "币种
     KPEIN TYPE KONP-KPEIN,                                 "数量单位
     KRECH TYPE KONP-KRECH,                                 "计算类型
     DATBI TYPE A005-DATBI,                                 "有效期到
     DATAB TYPE A005-DATAB,                                 "有效期从
     KNUMH TYPE A005-KNUMH,
     NAME1 TYPE KNA1-NAME1,
     ZWLCD TYPE MARA-ZWLCD,
     UMREZ TYPE MARM-UMREZ,
     MSEHL TYPE T006A-MSEHL,
     END OF TY_TAX.

TYPES:BEGIN OF TY_MARM,
      MATNR TYPE MARM-MATNR,                                "物料号
      UMREZ TYPE MARM-UMREZ,                                "计量单位转换分子
      MSEHI TYPE MARM-MSEHI,
      END OF TY_MARM.

TYPES:BEGIN OF TY_MARA,
      MATNR TYPE MARA-MATNR,
      BISMT TYPE MARA-BISMT,
      PRDHA TYPE MARA-PRDHA,
      ZWLCD TYPE MARA-ZWLCD,
      MEINS TYPE MARA-MEINS,
      MSEHL TYPE T006A-MSEHL,
     END OF TY_MARA.


<font color ="#0000FF">************************************************************************</font>
<font color ="#0000FF">* 内表声明</font>
<font color ="#0000FF">************************************************************************</font>
DATA:GT_CUSTOMER TYPE STANDARD TABLE OF TY_CUSTOMER,
     W_CUSTOMER TYPE TY_CUSTOMER,
     GT_ALV_CST TYPE STANDARD TABLE OF TY_CUSTOMER,
     W_ALV_CST TYPE TY_CUSTOMER,
     GT_PRICE TYPE STANDARD TABLE OF TY_PRICE,
     W_PRICE TYPE TY_PRICE,
     GT_ALV_PRI TYPE STANDARD TABLE OF TY_PRICE,
     W_ALV_PRI TYPE TY_PRICE,
     GT_TAX TYPE STANDARD TABLE OF TY_TAX,
     W_TAX TYPE TY_TAX,
     GT_ALV_TAX TYPE STANDARD TABLE OF TY_TAX,
     W_ALV_TAX TYPE TY_TAX,
     GT_ALV_TAX2 TYPE STANDARD TABLE OF TY_TAX,
     W_ALV_TAX2 TYPE TY_TAX,
     GT_ALV_Z0 TYPE STANDARD TABLE OF TY_TAX, "add by yetp 20140104
     GT_ALV_XJ TYPE STANDARD TABLE OF TY_TAX, "add by JUNDI 20150328
     GT_ALV_JD TYPE STANDARD TABLE OF TY_TAX, "add by JUNDI 20150328
     GT_ALV_ND TYPE STANDARD TABLE OF TY_TAX, "add by JUNDI 20150328
     GT_MARM TYPE STANDARD TABLE OF TY_MARM,
     W_MARM TYPE TY_MARM,
     GT_MARA TYPE STANDARD TABLE OF TY_MARA,
     W_MARA TYPE TY_MARA,
     G_XH TYPE I,
     GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV,
     W_FIELDCAT TYPE SLIS_FIELDCAT_ALV,
     W_LAYOUT TYPE SLIS_LAYOUT_ALV.
<font color ="#0000FF">************************************************************************</font>
<font color ="#0000FF">* 字段符声明</font>
<font color ="#0000FF">************************************************************************</font>
FIELD-SYMBOLS:&lt;FS_TAX&gt; TYPE TY_TAX,
               &lt;FS_ALV&gt; TYPE TY_TAX, "add by yetp 20130104
               &lt;FS_XJALV&gt; TYPE TY_TAX, "add by jundi 20150328
               &lt;FS_JDALV&gt; TYPE TY_TAX, "add by jundi 20150328
               &lt;FS_NDALV&gt; TYPE TY_TAX, "add by jundi 20150328
              &lt;FS_PRICE&gt; TYPE TY_PRICE,
              &lt;FS_MARM&gt; TYPE TY_MARM,
              &lt;FS_MARA&gt; TYPE TY_MARA,
              &lt;FS_CUSTOMER&gt; TYPE TY_CUSTOMER.
<font color ="#0000FF">************************************************************************</font>
<font color ="#0000FF">* 全局变量声明</font>
<font color ="#0000FF">************************************************************************</font>

<font color ="#0000FF">************************************************************************</font>
<font color ="#0000FF">* 定义选择屏幕参数</font>
<font color ="#0000FF">************************************************************************</font>
<font color ="#0000FF">*定义条件类型的初始查询界面</font>
SELECTION-SCREEN BEGIN OF BLOCK BLK1 WITH FRAME TITLE TEXT-001.
SELECTION-SCREEN BEGIN OF LINE.
PARAMETERS:P_ZR TYPE C RADIOBUTTON GROUP G1 USER-COMMAND SELE DEFAULT 'X'.
SELECTION-SCREEN COMMENT 4(20) TEXT-004.
PARAMETERS:P_ZK TYPE C RADIOBUTTON GROUP G1.
SELECTION-SCREEN COMMENT 28(20) TEXT-003.
PARAMETERS:P_Z0 TYPE C RADIOBUTTON GROUP G1.   "add by yetp 20140104
SELECTION-SCREEN COMMENT 52(20) TEXT-006.      "add by yetp 20140104
SELECTION-SCREEN END OF LINE.
SELECTION-SCREEN BEGIN OF LINE.
PARAMETERS:P_XJ TYPE C RADIOBUTTON GROUP G1.   "add by Jundi 20150327
SELECTION-SCREEN COMMENT 4(20) TEXT-007.      "add by Jundi 20150327
PARAMETERS:P_JD TYPE C RADIOBUTTON GROUP G1.   "add by Jundi 20150327
SELECTION-SCREEN COMMENT 28(20) TEXT-008.      "add by Jundi 20150327
PARAMETERS:P_ND TYPE C RADIOBUTTON GROUP G1.   "add by Jundi 20150327
SELECTION-SCREEN COMMENT 52(20) TEXT-009.      "add by Jundi 20150327
SELECTION-SCREEN END OF LINE.
SELECTION-SCREEN END OF BLOCK BLK1.
<font color ="#0000FF">*定义产品折扣查询的选择界面</font>
SELECTION-SCREEN BEGIN OF BLOCK BLK2 WITH FRAME TITLE TEXT-002.
PARAMETERS:P_SKW TYPE C RADIOBUTTON GROUP G2 USER-COMMAND SELE1 DEFAULT 'X' MODIF ID M1,
           P_SJW TYPE C RADIOBUTTON GROUP G2 MODIF ID M1.
SELECTION-SCREEN END OF BLOCK BLK2.
<font color ="#0000FF">*定义产品单价查询的选择界面</font>
SELECTION-SCREEN BEGIN OF BLOCK BLK3 WITH FRAME TITLE TEXT-002.
PARAMETERS:P_KW TYPE C RADIOBUTTON GROUP G3 USER-COMMAND SELE2 MODIF ID M2,
           P_XW TYPE C RADIOBUTTON GROUP G3 DEFAULT 'X' MODIF ID M2.
SELECTION-SCREEN END OF BLOCK BLK3.
<font color ="#0000FF">*定义销售客户/价格物料组的选择界面</font>
SELECTION-SCREEN BEGIN OF BLOCK BLK4 WITH FRAME TITLE TEXT-005.
PARAMETER:P_YXRQ1 TYPE A503-DATAB MODIF ID M1.
SELECT-OPTIONS:P_KH_CST FOR A503-KUNNR NO-EXTENSION NO INTERVALS MODIF ID 100,
               P_WL_CST FOR A503-MATNR MODIF ID 100,
               P_CST FOR A503-VKORG NO-EXTENSION NO INTERVALS MODIF ID M1,
               P_JGZ FOR A502-KONDA NO-EXTENSION NO INTERVALS MODIF ID 101,
               P_DJZ FOR A502-KONDM MODIF ID 101,
               P_WLDM FOR MARA-ZWLCD MODIF ID 100.
SELECTION-SCREEN END OF BLOCK BLK4.
<font color ="#0000FF">*定义客户/销售组织/物料的选择界面</font>
SELECTION-SCREEN BEGIN OF BLOCK BLK5 WITH FRAME TITLE TEXT-005.
PARAMETER:P_YXRQ2 TYPE A005-DATAB MODIF ID M2.
SELECT-OPTIONS:P_FXQD FOR A005-VTWEG NO-EXTENSION NO INTERVALS MODIF ID 102,
               P_TAX FOR A005-VKORG NO-EXTENSION NO INTERVALS MODIF ID M2,
               P_KH FOR A005-KUNNR NO-EXTENSION NO INTERVALS MODIF ID 102,
               P_WL_TAX FOR A005-MATNR MODIF ID M2,
               P_WLDM2 FOR MARA-ZWLCD MODIF ID M2,
               S_CPZ FOR MARA-SPART MODIF ID 103,
               S_WLZ FOR MARA-MATKL MODIF ID 103,
               S_CPCC FOR MARA-PRDHA MODIF ID 103.
SELECTION-SCREEN END OF BLOCK BLK5.

<font color ="#0000FF">***add by yetp 20140104 ***start</font>
<font color ="#0000FF">*定义客户月结返利选择界面</font>
SELECTION-SCREEN BEGIN OF BLOCK BLK6 WITH FRAME TITLE TEXT-005.
PARAMETER:P_YXRQ3 TYPE A307-DATAB MODIF ID M3.
SELECT-OPTIONS:P_VK_Z0 FOR A307-VKORG NO-EXTENSION NO INTERVALS MODIF ID M3,
               P_VT_Z0 FOR A307-VTWEG NO-EXTENSION NO INTERVALS MODIF ID M3,
               P_KH_Z0 FOR A307-KUNNR  MODIF ID M3.
SELECTION-SCREEN END OF BLOCK BLK6.
<font color ="#0000FF">***add by yetp 20140104 ***end</font>

<font color ="#0000FF">***add by Jundi 20150327***start</font>
<font color ="#0000FF">*定义现金返利查询选择界面</font>
SELECTION-SCREEN BEGIN OF BLOCK BLK7 WITH FRAME TITLE TEXT-007.
PARAMETER:P_YXRQ4 TYPE A307-DATAB MODIF ID M4.
SELECT-OPTIONS:P_VK_XJ FOR A307-VKORG NO-EXTENSION NO INTERVALS MODIF ID M4,
               P_VT_XJ FOR A307-VTWEG NO-EXTENSION NO INTERVALS MODIF ID M4,
               P_KH_XJ FOR A307-KUNNR  MODIF ID M4.
SELECTION-SCREEN END OF BLOCK BLK7.
<font color ="#0000FF">***add by Jundi 20150327***end</font>

<font color ="#0000FF">***add by Jundi 20150327***start</font>
<font color ="#0000FF">*定义季度返利查询选择界面</font>
SELECTION-SCREEN BEGIN OF BLOCK BLK8 WITH FRAME TITLE TEXT-008.
PARAMETER:P_YXRQ5 TYPE A307-DATAB MODIF ID M5.
SELECT-OPTIONS:P_VK_JD FOR A307-VKORG NO-EXTENSION NO INTERVALS MODIF ID M5,
               P_VT_JD FOR A307-VTWEG NO-EXTENSION NO INTERVALS MODIF ID M5,
               P_KH_JD FOR A307-KUNNR  MODIF ID M5.
SELECTION-SCREEN END OF BLOCK BLK8.
<font color ="#0000FF">***add by Jundi 20150327***end</font>

<font color ="#0000FF">***add by Jundi 20150327***start</font>
<font color ="#0000FF">*定义年度返利查询选择界面</font>
SELECTION-SCREEN BEGIN OF BLOCK BLK9 WITH FRAME TITLE TEXT-009.
PARAMETER:P_YXRQ6 TYPE A307-DATAB MODIF ID M6.
SELECT-OPTIONS:P_VK_ND FOR A307-VKORG NO-EXTENSION NO INTERVALS MODIF ID M6,
               P_VT_ND FOR A307-VTWEG NO-EXTENSION NO INTERVALS MODIF ID M6,
               P_KH_ND FOR A307-KUNNR  MODIF ID M6.
SELECTION-SCREEN END OF BLOCK BLK9.
<font color ="#0000FF">***add by Jundi 20150327***end</font>

<font color ="#0000FF">*&---------------------------------------------------------------------*</font>
<font color ="#0000FF">*&      DEFINE MACRO_FILL_FIELDCAT</font>
<font color ="#0000FF">*&---------------------------------------------------------------------*</font>
<font color ="#0000FF">*       填充结构宏定义</font>
<font color ="#0000FF">*----------------------------------------------------------------------*</font>
DEFINE MACRO_FILL_FIELDCAT.
  CLEAR W_FIELDCAT.
  &1 = &1 + 1.
  W_FIELDCAT-COL_POS    = &1.
  W_FIELDCAT-FIELDNAME  = &2.
  W_FIELDCAT-SELTEXT_L     = &3.
  W_FIELDCAT-SELTEXT_M     = &3.
  W_FIELDCAT-SELTEXT_S     = &3.
  W_FIELDCAT-NO_ZERO       = &4.
  W_FIELDCAT-EDIT_MASK = &5.
  APPEND W_FIELDCAT TO GT_FIELDCAT.
END-OF-DEFINITION.
</pre>
<hr>
<font size="2" face = "Sans Serif">Extracted by Direct Download Enterprise version 1.3.1 - E.G.Mellodew. 1998-2005 UK. Sap Release 702
</font>
</body>
</html>
